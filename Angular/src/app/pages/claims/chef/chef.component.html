<app-navbar>
	<app-details (commented)="commented($event)" [opened]="opened" [claim]="claim">

		<div class="root">
    <app-topbar></app-topbar>
			<div class="board">
				<div class="board-wrapper">
					<div class="d-flex" style="justify-content: space-between;">
						<h1 class="title">All Tickets</h1>
						<div class="cards d-flex ml-4">
							<div class="count-card">
								<div class="count">{{openCount}}</div>
								<div class="title">OPEN TICKETS</div>
							</div>
							<div class="count-card">
								<div class="count">{{resolvedCount}}</div>
								<div class="title">RESOLVED TICKETS</div>
							</div>
						</div>
					</div>
					<div class="board-columns">
						<div class="board-column">
							<div class="column-title">
								Active tickets
							</div>
							<div class="tasks-container">
								<mat-card class="my-2 d-flex" style="justify-content: space-between;align-items: center;" *ngFor="let item of openClaims" >
									<div class="item" (click)="openDetails(item._id)" style="width:100%">
										{{ item.subject }}
										{{ item.message }}
									</div>
									<div class="">

										<button mat-icon-button [matMenuTriggerFor]="menu"
											aria-label="Example icon-button with a menu">
											<mat-icon>more_vert</mat-icon>
										</button>
										<mat-menu #menu="matMenu">
											<button mat-menu-item [matMenuTriggerFor]="technicien">Techniciens</button>
										</mat-menu>

										<mat-menu #technicien="matMenu">
											<button (click)="affectClaim(item._id,ite._id)"
												[ngClass]="ite._id == item.technician ? 'active' : ' ' " mat-menu-item
												*ngFor="let ite of users">{{ite.name}}</button>
										</mat-menu>
									</div>
								</mat-card>
							</div>
						</div>
						<div class="board-column resolved">
							<div class="column-title">
								Ressolved tickets
							</div>
							<div class="tasks-container">
								<mat-card class="my-2" *ngFor="let item of resolvedClaims"
									(click)="openDetails(item._id)">
									{{ item.subject }}
									{{ item.message }}
								</mat-card>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</app-details>
</app-navbar>
